<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Snake</title>

<link rel="apple-touch-icon" href="icon-1024.png">
<link rel="apple-touch-icon-precomposed" href="icon-1024.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Snake">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<style>
body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#1a1a1a;
  font-family:Courier New, monospace;
  color:#d1fae5;
}
.tv{
  background:#3b2f2f;
  border-radius:30px;
  padding:24px;
  box-shadow: inset 0 0 0 6px #5c4033, 0 25px 50px rgba(0,0,0,.8);
}
.panel{
  display:flex;
  justify-content:space-between;
  margin-bottom:10px;
}
.screen{
  background:#020617;
  border-radius:20px;
  padding:14px;
  position:relative;
}
canvas{display:block;margin:auto}
.overlay{
  position:absolute;inset:0;
  background:rgba(0,0,0,.85);
  display:flex;align-items:center;justify-content:center;
}
.hidden{display:none}
.controls{
  margin-top:14px;
  display:grid;
  grid-template-columns:repeat(3,70px);
  justify-content:center;
  gap:8px;
}
.btn{
  width:70px;height:70px;border-radius:50%;
  background:#222;color:#d1fae5;
  font-size:22px;border:none;
}
.btn:active{transform:scale(.95)}
</style>
</head>
<body>

<div class="tv">
  <div class="panel">
    <div>PUNTOS: <span id="score">0</span></div>
    <div>RECORD: <span id="best">0</span></div>
  </div>

  <div class="screen">
    <canvas id="game" width="360" height="360"></canvas>
    <div id="over" class="overlay hidden">
      <div>
        <p>ðŸ“º SIN SEÃ‘AL</p>
        <button onclick="start()">REINTENTAR</button>
      </div>
    </div>
  </div>

  <div class="controls">
    <button class="btn" onclick="setDir(0,-1)">â–²</button>
    <button class="btn" onclick="setDir(-1,0)">â—€</button>
    <button class="btn" onclick="setDir(0,1)">â–¼</button>
    <button class="btn" onclick="setDir(1,0)">â–¶</button>
  </div>
</div>

<script>
const c=document.getElementById("game"),x=c.getContext("2d");
const s=18,cols=c.width/s;
let snake,food,dx,dy,score,loop,speed;
let best=localStorage.getItem("best")||0;
document.getElementById("best").textContent=best;

function start(){
 snake=[{x:8,y:8}];dx=1;dy=0;score=0;speed=180;
 food=rand();clearInterval(loop);
 document.getElementById("over").classList.add("hidden");
 loop=setInterval(update,speed);
}
function rand(){
 let p;
 do{p={x:Math.floor(Math.random()*cols),y:Math.floor(Math.random()*cols)}}
 while(snake.some(s=>s.x==p.x&&s.y==p.y));
 return p;
}
function setDir(xd,yd){if(xd!=-dx||yd!=-dy){dx=xd;dy=yd}}
function update(){
 const h={x:snake[0].x+dx,y:snake[0].y+dy};
 if(h.x<0||h.y<0||h.x>=cols||h.y>=cols||snake.some(s=>s.x==h.x&&s.y==h.y)){
  end();return;
 }
 snake.unshift(h);
 if(h.x==food.x&&h.y==food.y){
  score++;document.getElementById("score").textContent=score;
  food=rand();
 }else snake.pop();
 draw();
}
function draw(){
 x.fillStyle="#020617";x.fillRect(0,0,c.width,c.height);
 x.fillStyle="#f97316";x.fillRect(food.x*s,food.y*s,s,s);
 x.fillStyle="#22c55e";snake.forEach(p=>x.fillRect(p.x*s,p.y*s,s-1,s-1));
}
function end(){
 clearInterval(loop);
 document.getElementById("over").classList.remove("hidden");
 if(score>best){best=score;localStorage.setItem("best",best);document.getElementById("best").textContent=best;}
}
start();
</script>
</body>
</html>
